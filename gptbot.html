<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Polymarket GPT Bot Scanner</title>
<style>
body { background:#0b0f16;color:#fff;font-family:Arial }
h1 { color:#4da3ff }
button { padding:8px 14px;margin:5px }
table { width:100%; border-collapse:collapse;margin-top:10px }
th,td { border-bottom:1px solid #222;padding:6px;font-size:14px }
.safe { color:#00ff7f }
.risk { color:#ff4d4d }
</style>
</head>

<body>

<h1>Polymarket GPT Bot Scanner <span style="font-size:14px;">v8</span></h1>
<p>Research-first scanner. AI must justify safety.</p>

<button onclick="startScan()">START SCANNER</button>

<div id="status">Status: Idle</div>

<table>
<thead>
<tr>
  <th>Market</th>
  <th>Prob</th>
  <th>Status</th>
</tr>
</thead>
<tbody id="rows"></tbody>
</table>

<p style="opacity:.5">v8</p>

<script>
const WORKER =
  "https://solitary-paper-639a.cryptoworldgames.workers.dev/?url=";

async function startScan() {
  document.getElementById("status").innerText = "Status: Scanning...";
  const res = await fetch(
    WORKER + encodeURIComponent("https://gamma-api.polymarket.com/markets")
  );
  const data = await res.json();
  render(data.slice(0, 40));
}

function render(markets) {
  const rows = document.getElementById("rows");
  rows.innerHTML = "";

  markets.forEach(m => {
    const yes = parseFloat(m.outcomePrices?.[0] || 0);
    const prob = Math.round(yes * 1000) / 10;
    const safe = prob >= 95;

    rows.innerHTML += `
      <tr>
        <td>
          <a href="https://polymarket.com/search?_q=${encodeURIComponent(m.slug)}"
             target="_blank" style="color:#2dd4bf">
            ${m.question}
          </a>
        </td>
        <td>${prob}%</td>
        <td class="${safe ? "safe" : "risk"}">
          ${safe ? "SAFE" : "RISK"}
        </td>
      </tr>
    `;
  });

  document.getElementById("status").innerText =
    "Status: Loaded " + markets.length + " markets";
}
</script>

</body>
</html>
